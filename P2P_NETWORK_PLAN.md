# P2P ë„¤íŠ¸ì›Œí¬ ëŒ€ì „ ëª¨ë“œ êµ¬í˜„ ê³„íš

## ğŸ“‹ ëª©ì°¨
1. [ìš”êµ¬ì‚¬í•­ ë¶„ì„](#1-ìš”êµ¬ì‚¬í•­-ë¶„ì„)
2. [ê¸°ìˆ  ìŠ¤íƒ](#2-ê¸°ìˆ -ìŠ¤íƒ)
3. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#3-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
4. [êµ¬í˜„ ë‹¨ê³„](#4-êµ¬í˜„-ë‹¨ê³„)
5. [ë„¤íŠ¸ì›Œí¬ í”„ë¡œí† ì½œ](#5-ë„¤íŠ¸ì›Œí¬-í”„ë¡œí† ì½œ)
6. [íŒŒì¼ êµ¬ì¡°](#6-íŒŒì¼-êµ¬ì¡°)
7. [ê°œë°œ ìš°ì„ ìˆœìœ„](#7-ê°œë°œ-ìš°ì„ ìˆœìœ„)
8. [í…ŒìŠ¤íŠ¸ ê³„íš](#8-í…ŒìŠ¤íŠ¸-ê³„íš)

---

## 1. ìš”êµ¬ì‚¬í•­ ë¶„ì„

### 1.1 ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ (ìŠ¤í¬ë¦°ìƒ· ê¸°ë°˜)

#### âœ… P2P ëŒ€ì „ ëª¨ë“œ ê°œë°œ
- ì‹œì‘ ë©”ë‰´ì—ì„œ P2P ëŒ€ì „ ëª¨ë“œë¥¼ ê³¨ë¼ ì‹œì‘
- **2ëŒ€ì˜ PC**ì—ì„œ ë„¤íŠ¸ì›Œí¬ë¡œ ì—°ê²°í•˜ì—¬ ëŒ€ì „ ì§„í–‰
- ì¼ë°˜ ëŒ€ì „ ëª¨ë“œì™€ ë™ì¼í•œ ê²Œì„ ë°©ì‹

#### âœ… ì„œë²„/í´ë¼ì´ì–¸íŠ¸ ì—­í• 
- **ì„œë²„ ì„ íƒ ì‹œ**: IPì£¼ì†Œë¥¼ í™”ë©´ì— í‘œì‹œí•˜ê³  ëŒ€ê¸°
- **í´ë¼ì´ì–¸íŠ¸ ì„ íƒ ì‹œ**: IPì£¼ì†Œ ì…ë ¥í•˜ì—¬ ì„œë²„ì— ì ‘ì†
- ì—°ê²° ì™„ë£Œ í›„ ì„œë²„/í´ë¼ì´ì–¸íŠ¸ê°€ ì´ë¥¼ ì•Œë ¤ì£¼ê³  ëŒ€ê¸°

#### âœ… ê²Œì„ ì‹œì‘ ë°©ì‹
- ì„œë²„ì— í–‰ë‹¹í•˜ëŠ” í”Œë ˆì´ì–´ê°€ "ê²Œì„ ì‹œì‘" ë²„íŠ¼ì„ ëˆŒëŸ¬ ëŒ€ì „ ì‹œì‘
- ì¼ë°˜, ì•„ì´í…œ, ì‹œê°„ì œí•œ ëª¨ë“œ ì„ íƒ ê°€ëŠ¥

#### âœ… í™”ë©´ ë™ê¸°í™”
- ë‚´ê°€ í”Œë ˆì´ í•˜ëŠ” í™”ë©´ê³¼ ìƒëŒ€ë°©ì´ í”Œë ˆì´ í•˜ëŠ” í™”ë©´ì´ ëª¨ë‘ ë³´ì—¬ì•¼ í•¨
- ê° í”Œë ˆì´ì–´ì˜ ì¡°ì‘ì— ë”°ë¼ ë¸”ë¡ ë“±ì€ ì‹¤ì‹œê°„ìœ¼ë¡œ ì–‘ì¸¡ í™”ë©´ì— ë™ì‹œ í‘œì‹œ
- **ë™ì¼ ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ ê¸°ì¤€ í‚¤ ì…ë ¥-í™”ë©´ í‘œì‹œ ì§€ì—° 200ms ì´í•˜**

#### âœ… ìŠ¹íŒ¨ ì²˜ë¦¬
- ê²Œì„ ì™„ë£Œë˜ë©´ ëŒ€ì „ ëª¨ë“œì™€ ë™ì¼í•˜ê²Œ ìŠ¹íŒ¨ í‘œì‹œ
- ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì§í›„ì˜ ëŒ€ê¸°ìƒíƒœë¡œ ëŒì•„ê° (ì¬ëŒ€ì „ ê°€ëŠ¥)

### 1.2 ì¶”ê°€ ê³ ë ¤ì‚¬í•­ (ìŠ¤í¬ë¦°ìƒ· ê¸°ë°˜)

#### ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ ì²˜ë¦¬
- ë‹¨ìˆœíˆ ë„¤íŠ¸ì›Œí¬ê°€ ëŠë ¤ ì „ì†¡ì´ ì§€ì—°ë˜ëŠ” ê²½ìš°: **"ë™ ê±¸ë¦¼ ìƒíƒœ"** í‘œì‹œ
- ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìì²´ê°€ ì¼ì • ì‹œê°„ ì´ìƒ ëŠì–´ì§„ ê²½ìš°: ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ í›„ P2P ëŒ€ì „ ëª¨ë“œë¥¼ ì²˜ìŒ ë“¤ì–´ê°”ì„ ë•Œ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°

#### ê°œë°œ íŒ
- ì „ì†¡ ì§€ì—°ì´ë‚˜ ì—°ê²° ëŠê¹€ì˜ ê¸°ì¤€ì€ ê²Œì„ í”Œë ˆì´ê°€ ì›í™œí•˜ê²Œ ë  ìˆ˜ ìˆë„ë¡ ì§ì ‘ ì •ì˜í•˜ì—¬ ê´€ë¦¬
- í¸ë¦¬í•œ ì ‘ì†ì„ ìœ„í•´ ìµœê·¼ ì ‘ì† IPë¥¼ ì €ì¥í•˜ê³  P2P ëŒ€ì „ ëª¨ë“œì—ì„œ í´ë¼ì´ì–¸íŠ¸ê°€ ì´ë¥¼ í™•ì¸í•˜ì—¬ ì…ë ¥í•  ìˆ˜ ìˆê²Œ í•¨
- ë„¤íŠ¸ì›Œí¬ ì ‘ì† ê³¼ì •ì´ ì˜ ì§„í–‰ë˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ ì ì ˆí•œ ë©”ì‹œì§€ë¥¼ í”Œë ˆì´ì–´ì—ê²Œ í‘œì‹œ
- **ìë™í™” ëœ í…ŒìŠ¤íŠ¸ ì‘ì„±**

---

## 2. ê¸°ìˆ  ìŠ¤íƒ

### 2.1 ë„¤íŠ¸ì›Œí¬ í†µì‹ 
- **Java Socket API**: TCP ê¸°ë°˜ ì–‘ë°©í–¥ í†µì‹ 
  - `ServerSocket`: ì„œë²„ì¸¡ ì—°ê²° ìˆ˜ë½
  - `Socket`: í´ë¼ì´ì–¸íŠ¸-ì„œë²„ í†µì‹ 
- **ObjectInputStream/ObjectOutputStream**: ê°ì²´ ì§ë ¬í™” í†µì‹ 

### 2.2 ì§ë ¬í™”
- Java Serializable ì¸í„°í˜ì´ìŠ¤ í™œìš©
- ê¸°ì¡´ ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ (GameEvent) ì´ë¯¸ Serializable êµ¬í˜„ë¨

### 2.3 ë©€í‹°ìŠ¤ë ˆë”©
- **ì†¡ì‹  ìŠ¤ë ˆë“œ**: ê²Œì„ ì´ë²¤íŠ¸ë¥¼ ìƒëŒ€ë°©ì—ê²Œ ì „ì†¡
- **ìˆ˜ì‹  ìŠ¤ë ˆë“œ**: ìƒëŒ€ë°© ì´ë²¤íŠ¸ë¥¼ ë°›ì•„ì„œ ì²˜ë¦¬
- **íƒ€ì„ì•„ì›ƒ ê°ì§€ ìŠ¤ë ˆë“œ**: ì—°ê²° ìƒíƒœ ëª¨ë‹ˆí„°ë§

---

## 3. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 3.1 í˜„ì¬ ë¡œì»¬ ëŒ€ì „ ëª¨ë“œ êµ¬ì¡°
```
VersusFrameBoard (1200x600)
â”œâ”€ GameController1 (Player 1)
â”‚  â”œâ”€ EventBus
â”‚  â””â”€ GameView1
â””â”€ GameController2 (Player 2)
   â”œâ”€ EventBus
   â””â”€ GameView2
```

### 3.2 P2P ë„¤íŠ¸ì›Œí¬ ëŒ€ì „ ëª¨ë“œ êµ¬ì¡°
```
P2PVersusFrameBoard (1200x600)
â”œâ”€ LocalGameController (ë‚˜ì˜ ê²Œì„)
â”‚  â”œâ”€ EventBus (local)
â”‚  â”œâ”€ GameView (ë‚´ í™”ë©´)
â”‚  â””â”€ NetworkEventPublisher â†’ NetworkManager
â”‚
â”œâ”€ RemoteGameController (ìƒëŒ€ë°© ê²Œì„ - ì½ê¸° ì „ìš©)
â”‚  â”œâ”€ EventBus (remote)
â”‚  â””â”€ GameView (ìƒëŒ€ë°© í™”ë©´)
â”‚
â””â”€ NetworkManager
   â”œâ”€ Role (SERVER / CLIENT)
   â”œâ”€ ConnectionManager (Socket ê´€ë¦¬)
   â”œâ”€ MessageSender (ì†¡ì‹  ìŠ¤ë ˆë“œ)
   â”œâ”€ MessageReceiver (ìˆ˜ì‹  ìŠ¤ë ˆë“œ)
   â”œâ”€ ConnectionMonitor (ì—°ê²° ìƒíƒœ ê°ì‹œ)
   â””â”€ EventSynchronizer (ì´ë²¤íŠ¸ ë™ê¸°í™”)
```

### 3.3 ì´ë²¤íŠ¸ íë¦„

#### ë‚´ ì¡°ì‘ â†’ ìƒëŒ€ë°© í™”ë©´
```
í‚¤ ì…ë ¥ â†’ LocalGameController
  â†“
ì´ë²¤íŠ¸ ë°œìƒ (BlockMovedEvent, LineClearedEvent ë“±)
  â†“
NetworkEventPublisherê°€ ê°ì§€
  â†“
MessageSenderë¥¼ í†µí•´ ì§ë ¬í™”í•˜ì—¬ ì „ì†¡
  â†“
ìƒëŒ€ë°©ì˜ MessageReceiverê°€ ìˆ˜ì‹ 
  â†“
ì—­ì§ë ¬í™”í•˜ì—¬ RemoteGameControllerì˜ EventBusì— ë°œí–‰
  â†“
ìƒëŒ€ë°© í™”ë©´ì— ë‚´ ê²Œì„ ìƒíƒœ í‘œì‹œ
```

#### ìƒëŒ€ë°© ì¡°ì‘ â†’ ë‚´ í™”ë©´ (ì—­ë°©í–¥ ë™ì¼)

---

## 4. êµ¬í˜„ ë‹¨ê³„

### Phase 1: ë„¤íŠ¸ì›Œí¬ ì¸í”„ë¼ êµ¬ì¶• (ê¸°ë³¸ ì—°ê²°) â­ ìš°ì„ ìˆœìœ„ ë†’ìŒ

#### Step 1.1: ë„¤íŠ¸ì›Œí¬ íŒ¨í‚¤ì§€ êµ¬ì¡° ìƒì„±
```
app/src/main/java/network/
â”œâ”€â”€ NetworkManager.java           # ë„¤íŠ¸ì›Œí¬ ì´ê´„ ê´€ë¦¬
â”œâ”€â”€ ConnectionManager.java        # Socket ì—°ê²° ê´€ë¦¬
â”œâ”€â”€ MessageSender.java            # ì†¡ì‹  ìŠ¤ë ˆë“œ
â”œâ”€â”€ MessageReceiver.java          # ìˆ˜ì‹  ìŠ¤ë ˆë“œ
â”œâ”€â”€ ConnectionMonitor.java        # ì—°ê²° ìƒíƒœ ëª¨ë‹ˆí„°ë§
â”œâ”€â”€ NetworkConfig.java            # ë„¤íŠ¸ì›Œí¬ ì„¤ì • (í¬íŠ¸, íƒ€ì„ì•„ì›ƒ ë“±)
â””â”€â”€ NetworkRole.java              # enum (SERVER, CLIENT)
```

#### Step 1.2: ê¸°ë³¸ ë©”ì‹œì§€ í´ë˜ìŠ¤ ì •ì˜
```java
// ë„¤íŠ¸ì›Œí¬ë¡œ ì „ì†¡ë  ëª¨ë“  ë©”ì‹œì§€ì˜ ê¸°ë³¸ í´ë˜ìŠ¤
public abstract class NetworkMessage implements Serializable {
    private long timestamp;
    private String messageId;
    private MessageType type;
}

// ë©”ì‹œì§€ íƒ€ì…
enum MessageType {
    GAME_EVENT,      // ê²Œì„ ì´ë²¤íŠ¸ (ë¸”ë¡ ì´ë™, ì¤„ ì‚­ì œ ë“±)
    CONNECTION,      // ì—°ê²° ê´€ë ¨
    GAME_CONTROL,    // ê²Œì„ ì‹œì‘/ì¢…ë£Œ
    HEARTBEAT,       // ì—°ê²° ìœ ì§€ í™•ì¸
    ATTACK           // ê³µê²© ì¤„
}
```

#### Step 1.3: ì—°ê²° UI êµ¬í˜„
```
app/src/main/java/p2p/
â”œâ”€â”€ P2PMenuFrame.java             # P2P ë©”ë‰´ (ì„œë²„/í´ë¼ì´ì–¸íŠ¸ ì„ íƒ)
â”œâ”€â”€ P2PServerSetupFrame.java      # ì„œë²„ ì„¤ì • í™”ë©´ (IP í‘œì‹œ, ëŒ€ê¸°)
â”œâ”€â”€ P2PClientSetupFrame.java      # í´ë¼ì´ì–¸íŠ¸ ì„¤ì • í™”ë©´ (IP ì…ë ¥)
â””â”€â”€ P2PConnectionDialog.java      # ì—°ê²° ì§„í–‰ ìƒíƒœ ë‹¤ì´ì–¼ë¡œê·¸
```

**êµ¬í˜„ ë‚´ìš©:**
- StartFrameì— "P2P ëŒ€ì „" ë²„íŠ¼ ì¶”ê°€
- P2PMenuFrame: "ì„œë²„ë¡œ í˜¸ìŠ¤íŠ¸" vs "í´ë¼ì´ì–¸íŠ¸ë¡œ ì°¸ê°€" ì„ íƒ
- ì„œë²„ í™”ë©´: ë¡œì»¬ IP ìë™ í‘œì‹œ, í¬íŠ¸ ë²ˆí˜¸ í‘œì‹œ, "ëŒ€ê¸° ì¤‘..." ìƒíƒœ
- í´ë¼ì´ì–¸íŠ¸ í™”ë©´: IP ì…ë ¥ í•„ë“œ, í¬íŠ¸ ì…ë ¥ í•„ë“œ, "ìµœê·¼ ì ‘ì† IP" í‘œì‹œ, "ì—°ê²°" ë²„íŠ¼

#### Step 1.4: Socket ì—°ê²° êµ¬í˜„
```java
// ConnectionManager.java
public class ConnectionManager {
    private ServerSocket serverSocket;  // ì„œë²„ìš©
    private Socket socket;              // í´ë¼ì´ì–¸íŠ¸/ì—°ê²°ëœ ì†Œì¼“
    private ObjectOutputStream out;
    private ObjectInputStream in;
    
    // ì„œë²„ë¡œ ì‹œì‘
    public void startServer(int port) throws IOException;
    
    // í´ë¼ì´ì–¸íŠ¸ë¡œ ì—°ê²°
    public void connectToServer(String host, int port) throws IOException;
    
    // ì—°ê²° ì¢…ë£Œ
    public void disconnect();
}
```

**í…ŒìŠ¤íŠ¸:**
- [ ] ì„œë²„ ì‹œì‘ â†’ IP í‘œì‹œ í™•ì¸
- [ ] í´ë¼ì´ì–¸íŠ¸ ì—°ê²° â†’ ì„±ê³µ ë©”ì‹œì§€ í™•ì¸
- [ ] ì–‘ìª½ ëª¨ë‘ "ì—°ê²°ë¨" ìƒíƒœ í‘œì‹œ
- [ ] ì˜ëª»ëœ IP ì…ë ¥ ì‹œ ì—ëŸ¬ ì²˜ë¦¬

---

### Phase 2: ê²Œì„ ì´ë²¤íŠ¸ ë™ê¸°í™” â­ ìš°ì„ ìˆœìœ„ ë†’ìŒ

#### Step 2.1: ë„¤íŠ¸ì›Œí¬ ì´ë²¤íŠ¸ ë˜í¼ ìƒì„±
```java
// ê¸°ì¡´ GameEventë¥¼ ë„¤íŠ¸ì›Œí¬ë¡œ ì „ì†¡í•˜ê¸° ìœ„í•œ ë˜í¼
public class GameEventMessage extends NetworkMessage {
    private GameEvent gameEvent;  // ê¸°ì¡´ ì´ë²¤íŠ¸ ê°ì²´
    private int playerNumber;     // 1 or 2 (ì–´ëŠ í”Œë ˆì´ì–´ ì´ë²¤íŠ¸ì¸ì§€)
    
    public GameEventMessage(GameEvent event, int player) {
        super(MessageType.GAME_EVENT);
        this.gameEvent = event;
        this.playerNumber = player;
    }
}
```

#### Step 2.2: EventSynchronizer êµ¬í˜„
```java
public class EventSynchronizer {
    private EventBus localEventBus;    // ë‚´ ê²Œì„
    private EventBus remoteEventBus;   // ìƒëŒ€ë°© ê²Œì„
    private MessageSender sender;
    
    // ë‚´ ì´ë²¤íŠ¸ë¥¼ ìƒëŒ€ë°©ì—ê²Œ ì „ì†¡
    public void publishLocalEvent(GameEvent event) {
        localEventBus.publish(event);  // ë‚´ ê²Œì„ì— ì ìš©
        sender.send(new GameEventMessage(event, 1));  // ìƒëŒ€ë°©ì—ê²Œ ì „ì†¡
    }
    
    // ìƒëŒ€ë°© ì´ë²¤íŠ¸ë¥¼ ë‚´ í™”ë©´ì— í‘œì‹œ
    public void handleRemoteEvent(GameEventMessage message) {
        remoteEventBus.publish(message.getGameEvent());
    }
}
```

#### Step 2.3: ì†¡ìˆ˜ì‹  ìŠ¤ë ˆë“œ êµ¬í˜„
```java
// MessageSender.java
public class MessageSender implements Runnable {
    private BlockingQueue<NetworkMessage> messageQueue;
    private ObjectOutputStream out;
    
    @Override
    public void run() {
        while (connected) {
            NetworkMessage msg = messageQueue.take();
            out.writeObject(msg);
            out.flush();
        }
    }
    
    public void send(NetworkMessage msg) {
        messageQueue.offer(msg);
    }
}

// MessageReceiver.java
public class MessageReceiver implements Runnable {
    private ObjectInputStream in;
    private MessageHandler handler;
    
    @Override
    public void run() {
        while (connected) {
            NetworkMessage msg = (NetworkMessage) in.readObject();
            handler.handle(msg);
        }
    }
}
```

#### Step 2.4: P2PVersusFrameBoard êµ¬í˜„
```java
public class P2PVersusFrameBoard extends JFrame {
    private GameController localController;   // ë‚´ ê²Œì„
    private GameController remoteController;  // ìƒëŒ€ë°© ê²Œì„ (ì½ê¸° ì „ìš©)
    private NetworkManager networkManager;
    private EventSynchronizer synchronizer;
    
    // ë‚´ í‚¤ ì…ë ¥ë§Œ ì²˜ë¦¬
    private P2PLocalKeyListener localKeyListener;
    
    // ìƒëŒ€ë°© ê²Œì„ì€ ë„¤íŠ¸ì›Œí¬ ì´ë²¤íŠ¸ë¡œë§Œ ì—…ë°ì´íŠ¸
}
```

**êµ¬í˜„ ë‚´ìš©:**
- ë¡œì»¬ ê²Œì„: ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬ + ì´ë²¤íŠ¸ ë°œìƒ â†’ ë„¤íŠ¸ì›Œí¬ ì „ì†¡
- ë¦¬ëª¨íŠ¸ ê²Œì„: ë„¤íŠ¸ì›Œí¬ ìˆ˜ì‹ ë§Œìœ¼ë¡œ ì—…ë°ì´íŠ¸ (ì…ë ¥ ì°¨ë‹¨)
- ì–‘ìª½ í™”ë©´ ëª¨ë‘ í‘œì‹œ (ë¡œì»¬: ì™¼ìª½, ë¦¬ëª¨íŠ¸: ì˜¤ë¥¸ìª½)

**í…ŒìŠ¤íŠ¸:**
- [ ] ë‚´ ë¸”ë¡ ì´ë™ â†’ ìƒëŒ€ë°© í™”ë©´ì—ë„ í‘œì‹œ
- [ ] ìƒëŒ€ë°© ë¸”ë¡ ì´ë™ â†’ ë‚´ í™”ë©´ì— í‘œì‹œ
- [ ] ì¤„ ì‚­ì œ ì´ë²¤íŠ¸ ë™ê¸°í™”
- [ ] ê³µê²© ì¤„ ì „ì†¡ ë° ìˆ˜ì‹ 

---

### Phase 3: ê²Œì„ ì‹œì‘/ì¢…ë£Œ ì œì–´ â­ ìš°ì„ ìˆœìœ„ ì¤‘

#### Step 3.1: ê²Œì„ ì œì–´ ë©”ì‹œì§€ ì •ì˜
```java
public class GameControlMessage extends NetworkMessage {
    public enum ControlType {
        START_GAME,      // ê²Œì„ ì‹œì‘
        PAUSE_GAME,      // ì¼ì‹œì •ì§€
        RESUME_GAME,     // ì¬ê°œ
        END_GAME,        // ê²Œì„ ì¢…ë£Œ
        READY,           // ì¤€ë¹„ ì™„ë£Œ
        MODE_SELECT      // ëª¨ë“œ ì„ íƒ (NORMAL, ITEM, TIME_LIMIT)
    }
    
    private ControlType controlType;
    private VersusMode selectedMode;  // ì„ íƒëœ ê²Œì„ ëª¨ë“œ
}
```

#### Step 3.2: ê²Œì„ ì‹œì‘ í”„ë¡œí† ì½œ
```
1. ì–‘ìª½ ì—°ê²° ì™„ë£Œ
2. ì„œë²„ê°€ ëª¨ë“œ ì„ íƒ (NORMAL/ITEM/TIME_LIMIT)
3. MODE_SELECT ë©”ì‹œì§€ ì „ì†¡ â†’ í´ë¼ì´ì–¸íŠ¸ ìˆ˜ì‹ 
4. ì–‘ìª½ ëª¨ë‘ READY ë©”ì‹œì§€ êµí™˜
5. ì„œë²„ê°€ START_GAME ë©”ì‹œì§€ ì „ì†¡
6. ì–‘ìª½ ë™ì‹œì— ê²Œì„ ì‹œì‘
```

#### Step 3.3: P2PWaitingRoom êµ¬í˜„
```java
public class P2PWaitingRoom extends JFrame {
    // ì„œë²„ìš©: ëª¨ë“œ ì„ íƒ UI + "ê²Œì„ ì‹œì‘" ë²„íŠ¼
    // í´ë¼ì´ì–¸íŠ¸ìš©: "ìƒëŒ€ë°© ëŒ€ê¸° ì¤‘..." í‘œì‹œ
    
    private JComboBox<VersusMode> modeSelector;  // ì„œë²„ë§Œ í™œì„±í™”
    private JButton startButton;                  // ì„œë²„ë§Œ í™œì„±í™”
    private JLabel statusLabel;                   // ì—°ê²° ìƒíƒœ í‘œì‹œ
}
```

**í…ŒìŠ¤íŠ¸:**
- [ ] ì„œë²„ê°€ ëª¨ë“œ ì„ íƒ â†’ í´ë¼ì´ì–¸íŠ¸ì— ë°˜ì˜
- [ ] ì„œë²„ê°€ "ê²Œì„ ì‹œì‘" â†’ ì–‘ìª½ ë™ì‹œ ì‹œì‘
- [ ] ê²Œì„ ì¢…ë£Œ í›„ ëŒ€ê¸°ì‹¤ë¡œ ë³µê·€

---

### Phase 4: ê³µê²© ì‹œìŠ¤í…œ ë™ê¸°í™” â­ ìš°ì„ ìˆœìœ„ ì¤‘

#### Step 4.1: ê³µê²© ë©”ì‹œì§€ ì •ì˜
```java
public class AttackMessage extends NetworkMessage {
    private int attackLines;           // ê³µê²© ì¤„ ìˆ˜
    private int[][] blockPattern;      // ë¸”ë¡ íŒ¨í„´
    private int blockX;                // ë¸”ë¡ X ìœ„ì¹˜
    
    public AttackMessage(int lines, int[][] pattern, int x) {
        super(MessageType.ATTACK);
        this.attackLines = lines;
        this.blockPattern = pattern;
        this.blockX = x;
    }
}
```

#### Step 4.2: ê³µê²© ë™ê¸°í™” ë¡œì§
```
Player 1ì´ ì¤„ ì‚­ì œ
  â†“
LineClearedEvent ë°œìƒ
  â†“
VersusAttackManager.calculateAttackLines()
  â†“
AttackMessage ìƒì„± â†’ ë„¤íŠ¸ì›Œí¬ ì „ì†¡
  â†“
Player 2ê°€ ìˆ˜ì‹ 
  â†“
GameController.addAttackLines() í˜¸ì¶œ
  â†“
Player 2 í™”ë©´ì— ê³µê²© ì¤„ ì¶”ê°€
```

**í…ŒìŠ¤íŠ¸:**
- [ ] ë‚´ê°€ ì¤„ ì‚­ì œ â†’ ìƒëŒ€ë°©ì—ê²Œ ê³µê²© ì¤„ ì¶”ê°€
- [ ] ìƒëŒ€ë°©ì´ ì¤„ ì‚­ì œ â†’ ë‚´ê²Œ ê³µê²© ì¤„ ì¶”ê°€
- [ ] ê³µê²© ì¤„ ìµœëŒ€ 10ê°œ ì œí•œ í™•ì¸

---

### Phase 5: ì—°ê²° ì•ˆì •ì„± ë° ì—ëŸ¬ ì²˜ë¦¬ â­ ìš°ì„ ìˆœìœ„ ë†’ìŒ

#### Step 5.1: Heartbeat ì‹œìŠ¤í…œ
```java
public class HeartbeatManager {
    private static final long HEARTBEAT_INTERVAL = 1000;  // 1ì´ˆë§ˆë‹¤
    private static final long TIMEOUT_THRESHOLD = 5000;   // 5ì´ˆ ì‘ë‹µ ì—†ìœ¼ë©´ íƒ€ì„ì•„ì›ƒ
    
    private long lastReceivedTime;
    
    public void sendHeartbeat() {
        sender.send(new HeartbeatMessage());
    }
    
    public void updateLastReceived() {
        lastReceivedTime = System.currentTimeMillis();
    }
    
    public boolean isTimeout() {
        return System.currentTimeMillis() - lastReceivedTime > TIMEOUT_THRESHOLD;
    }
}
```

#### Step 5.2: ì—°ê²° ìƒíƒœ ëª¨ë‹ˆí„°ë§
```java
public class ConnectionMonitor implements Runnable {
    private HeartbeatManager heartbeat;
    private ConnectionState state;
    
    @Override
    public void run() {
        while (true) {
            if (heartbeat.isTimeout()) {
                state = ConnectionState.DISCONNECTED;
                handleDisconnection();
            } else if (isLagging()) {
                state = ConnectionState.LAGGING;
                showLagWarning();
            }
            Thread.sleep(500);
        }
    }
}
```

#### Step 5.3: ë„¤íŠ¸ì›Œí¬ ì§€ì—° ê°ì§€
```java
public class LatencyMonitor {
    private static final long LAG_THRESHOLD = 200;  // 200ms
    
    private Queue<Long> latencyHistory = new LinkedList<>();
    
    public void recordLatency(long latency) {
        latencyHistory.offer(latency);
        if (latencyHistory.size() > 10) {
            latencyHistory.poll();
        }
    }
    
    public boolean isLagging() {
        return getAverageLatency() > LAG_THRESHOLD;
    }
    
    public long getAverageLatency() {
        return latencyHistory.stream()
            .mapToLong(Long::longValue)
            .average()
            .orElse(0);
    }
}
```

#### Step 5.4: ì—ëŸ¬ ì²˜ë¦¬
```java
public enum DisconnectionReason {
    NETWORK_TIMEOUT,      // ë„¤íŠ¸ì›Œí¬ ëŠê¹€
    OPPONENT_QUIT,        // ìƒëŒ€ë°© ì¢…ë£Œ
    CONNECTION_ERROR      // ì—°ê²° ì˜¤ë¥˜
}

public class DisconnectionHandler {
    public void handleDisconnection(DisconnectionReason reason) {
        // í˜„ì¬ ê²Œì„ ì¤‘ë‹¨
        // ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
        // P2P ë©”ë‰´ë¡œ ëŒì•„ê°€ê¸°
    }
}
```

**UI í‘œì‹œ:**
- "ë™ ê±¸ë¦¼ ìƒíƒœ" - ë…¸ë€ìƒ‰ ê²½ê³  í‘œì‹œ (200ms ì´ìƒ ì§€ì—°)
- "ì—°ê²° ëŠê¹€" - ë¹¨ê°„ìƒ‰ ì—ëŸ¬ ë‹¤ì´ì–¼ë¡œê·¸ (5ì´ˆ ì´ìƒ ë¬´ì‘ë‹µ)

**í…ŒìŠ¤íŠ¸:**
- [ ] ë„¤íŠ¸ì›Œí¬ ì¼€ì´ë¸” ë½‘ê¸° â†’ "ì—°ê²° ëŠê¹€" í‘œì‹œ
- [ ] ì§€ì—° ì‹œë®¬ë ˆì´ì…˜ â†’ "ë™ ê±¸ë¦¼" í‘œì‹œ
- [ ] ìƒëŒ€ë°© ê°•ì œ ì¢…ë£Œ â†’ ë©”ë‰´ë¡œ ë³µê·€

---

### Phase 6: ì§€ì—° ìµœì í™” ë° ë™ê¸°í™” â­ ìš°ì„ ìˆœìœ„ ì¤‘

#### Step 6.1: ì´ë²¤íŠ¸ í•„í„°ë§
```java
// ëª¨ë“  ì´ë²¤íŠ¸ë¥¼ ì „ì†¡í•˜ë©´ ë„ˆë¬´ ë§ìŒ
// í•„ìš”í•œ ì´ë²¤íŠ¸ë§Œ ì„ ë³„í•˜ì—¬ ì „ì†¡
public class EventFilter {
    private static final Set<Class<?>> SYNC_EVENTS = Set.of(
        BlockMovedEvent.class,
        BlockRotatedEvent.class,
        BlockLandedEvent.class,
        LineClearedEvent.class,
        GameOverEvent.class,
        ScoreUpdateEvent.class
        // TickEventëŠ” ì „ì†¡í•˜ì§€ ì•ŠìŒ (ë¡œì»¬ì—ì„œ ê°ì ê´€ë¦¬)
    );
    
    public boolean shouldSync(GameEvent event) {
        return SYNC_EVENTS.contains(event.getClass());
    }
}
```

#### Step 6.2: ë²„í¼ë§ ë° ë°°ì¹˜ ì „ì†¡
```java
// ì‘ì€ ì´ë²¤íŠ¸ë“¤ì„ ëª¨ì•„ì„œ í•œ ë²ˆì— ì „ì†¡
public class MessageBatcher {
    private List<NetworkMessage> buffer = new ArrayList<>();
    private static final int BATCH_SIZE = 5;
    private static final long BATCH_TIMEOUT = 50;  // 50ms
    
    public void add(NetworkMessage msg) {
        buffer.add(msg);
        if (buffer.size() >= BATCH_SIZE) {
            flush();
        }
    }
    
    public void flush() {
        if (!buffer.isEmpty()) {
            sender.send(new BatchMessage(buffer));
            buffer.clear();
        }
    }
}
```

#### Step 6.3: ì…ë ¥ ì˜ˆì¸¡ (ì„ íƒì )
```java
// ìƒëŒ€ë°© ë¸”ë¡ì´ ê³„ì† ì•„ë˜ë¡œ ë–¨ì–´ì§€ëŠ” ê²ƒì€ ì˜ˆì¸¡ ê°€ëŠ¥
// ë„¤íŠ¸ì›Œí¬ ì§€ì—°ì„ ì¤„ì´ê¸° ìœ„í•´ ë¡œì»¬ì—ì„œ ì˜ˆì¸¡
public class InputPredictor {
    public GameState predictNextState(GameState current) {
        // í˜„ì¬ ë¸”ë¡ì´ ê³„ì† ë‚´ë ¤ê°„ë‹¤ê³  ê°€ì •
        // ì‹¤ì œ ì´ë²¤íŠ¸ ìˆ˜ì‹  ì‹œ ë³´ì •
    }
}
```

---

### Phase 7: UI/UX ê°œì„  â­ ìš°ì„ ìˆœìœ„ ë‚®ìŒ

#### Step 7.1: ìµœê·¼ ì ‘ì† IP ì €ì¥
```java
public class ConnectionHistory {
    private static final String HISTORY_FILE = "connection_history.json";
    private List<String> recentIPs = new ArrayList<>();
    
    public void saveConnection(String ip) {
        recentIPs.add(0, ip);  // ë§¨ ì•ì— ì¶”ê°€
        if (recentIPs.size() > 5) {
            recentIPs.remove(5);  // ìµœëŒ€ 5ê°œë§Œ ì €ì¥
        }
        saveToFile();
    }
    
    public List<String> getRecentIPs() {
        return new ArrayList<>(recentIPs);
    }
}
```

#### Step 7.2: ì—°ê²° ì§„í–‰ ìƒíƒœ í‘œì‹œ
```java
public class ConnectionProgressDialog extends JDialog {
    private JProgressBar progressBar;
    private JLabel statusLabel;
    
    public void updateStatus(String message) {
        statusLabel.setText(message);
    }
    
    // "ì„œë²„ ì‹œì‘ ì¤‘..."
    // "í´ë¼ì´ì–¸íŠ¸ ì—°ê²° ì¤‘..."
    // "í•¸ë“œì…°ì´í¬ ì§„í–‰ ì¤‘..."
    // "ì—°ê²° ì™„ë£Œ!"
}
```

#### Step 7.3: ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ì¸ë””ì¼€ì´í„°
```java
// ê²Œì„ í™”ë©´ ìš°ì¸¡ ìƒë‹¨ì— í‘œì‹œ
public class NetworkStatusIndicator extends JPanel {
    private ConnectionState state;
    private long latency;
    
    @Override
    protected void paintComponent(Graphics g) {
        // GREEN: ì •ìƒ (< 100ms)
        // YELLOW: ì§€ì—° (100-200ms)
        // RED: ë™ (> 200ms)
        // GRAY: ì—°ê²° ëŠê¹€
    }
}
```

---

### Phase 8: ìë™í™” í…ŒìŠ¤íŠ¸ â­ ìš°ì„ ìˆœìœ„ ë†’ìŒ

#### Step 8.1: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
```java
// ConnectionManagerTest.java
@Test
public void testServerConnection() {
    ConnectionManager server = new ConnectionManager();
    server.startServer(12345);
    assertTrue(server.isServerRunning());
}

@Test
public void testClientConnection() {
    ConnectionManager client = new ConnectionManager();
    client.connectToServer("localhost", 12345);
    assertTrue(client.isConnected());
}

// MessageSerializationTest.java
@Test
public void testGameEventSerialization() {
    LineClearedEvent event = new LineClearedEvent(3);
    GameEventMessage msg = new GameEventMessage(event, 1);
    
    byte[] serialized = serialize(msg);
    GameEventMessage deserialized = deserialize(serialized);
    
    assertEquals(3, ((LineClearedEvent)deserialized.getGameEvent()).getLinesCleared());
}
```

#### Step 8.2: í†µí•© í…ŒìŠ¤íŠ¸
```java
// P2PIntegrationTest.java
@Test
public void testFullGameFlow() {
    // 1. ì„œë²„ ì‹œì‘
    P2PServer server = new P2PServer();
    server.start(12345);
    
    // 2. í´ë¼ì´ì–¸íŠ¸ ì—°ê²°
    P2PClient client = new P2PClient();
    client.connect("localhost", 12345);
    
    // 3. ê²Œì„ ì‹œì‘
    server.startGame(VersusMode.NORMAL);
    
    // 4. ì´ë²¤íŠ¸ ë™ê¸°í™” í™•ì¸
    server.moveBlock();
    Thread.sleep(100);
    assertTrue(client.getRemoteBlock().isMoved());
}
```

#### Step 8.3: ë„¤íŠ¸ì›Œí¬ ì‹œë®¬ë ˆì´ì…˜ í…ŒìŠ¤íŠ¸
```java
// NetworkSimulator.java
public class NetworkSimulator {
    // ì§€ì—° ì‹œë®¬ë ˆì´ì…˜
    public void simulateLatency(int milliseconds) {
        Thread.sleep(milliseconds);
    }
    
    // íŒ¨í‚· ì†ì‹¤ ì‹œë®¬ë ˆì´ì…˜
    public void simulatePacketLoss(double lossRate) {
        if (Math.random() < lossRate) {
            // ë©”ì‹œì§€ ë²„ë¦¼
        }
    }
    
    // ì—°ê²° ëŠê¹€ ì‹œë®¬ë ˆì´ì…˜
    public void simulateDisconnection() {
        connectionManager.forceDisconnect();
    }
}

@Test
public void testHighLatency() {
    simulator.simulateLatency(300);  // 300ms ì§€ì—°
    assertTrue(monitor.isLagging());
}
```

---

## 5. ë„¤íŠ¸ì›Œí¬ í”„ë¡œí† ì½œ

### 5.1 ë©”ì‹œì§€ í˜•ì‹

#### ê³µí†µ í—¤ë”
```
[4 bytes] ë©”ì‹œì§€ ê¸¸ì´
[1 byte]  ë©”ì‹œì§€ íƒ€ì…
[8 bytes] íƒ€ì„ìŠ¤íƒ¬í”„
[ë³€ë™]    í˜ì´ë¡œë“œ (ì§ë ¬í™”ëœ ê°ì²´)
```

#### ë©”ì‹œì§€ íƒ€ì…ë³„ í˜ì´ë¡œë“œ

**GAME_EVENT (0x01)**
```json
{
  "playerNumber": 1,
  "eventType": "LineClearedEvent",
  "eventData": {
    "linesCleared": 3
  }
}
```

**ATTACK (0x02)**
```json
{
  "attackLines": 3,
  "blockPattern": [[1,1,1,1]],
  "blockX": 5
}
```

**GAME_CONTROL (0x03)**
```json
{
  "controlType": "START_GAME",
  "mode": "NORMAL"
}
```

**HEARTBEAT (0x04)**
```json
{
  "timestamp": 1700000000000
}
```

### 5.2 í•¸ë“œì…°ì´í¬ í”„ë¡œí† ì½œ

```
Client â†’ Server: CONNECT_REQUEST
Server â†’ Client: CONNECT_ACCEPT (ë˜ëŠ” CONNECT_REJECT)
Client â†’ Server: HANDSHAKE_ACK
Server â†’ Client: READY

[ëŒ€ê¸°ì‹¤ ìƒíƒœ]

Server â†’ Client: MODE_SELECT (mode: NORMAL)
Client â†’ Server: READY_ACK
Server â†’ Client: START_GAME
Client â†’ Server: START_ACK

[ê²Œì„ ì§„í–‰]
```

### 5.3 ì—ëŸ¬ ì²˜ë¦¬ í”„ë¡œí† ì½œ

```
ANY â†’ ANY: HEARTBEAT (1ì´ˆë§ˆë‹¤)
ANY â†’ ANY: HEARTBEAT_ACK

[5ì´ˆê°„ ì‘ë‹µ ì—†ìŒ]
â†’ CONNECTION_TIMEOUT
â†’ ê²Œì„ ì¤‘ë‹¨
â†’ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
â†’ ë©”ë‰´ë¡œ ë³µê·€
```

---

## 6. íŒŒì¼ êµ¬ì¡°

### 6.1 ìƒˆë¡œ ì¶”ê°€ë  íŒŒì¼

```
app/src/main/java/
â”œâ”€â”€ network/                          # ë„¤íŠ¸ì›Œí¬ ë ˆì´ì–´
â”‚   â”œâ”€â”€ NetworkManager.java
â”‚   â”œâ”€â”€ ConnectionManager.java
â”‚   â”œâ”€â”€ MessageSender.java
â”‚   â”œâ”€â”€ MessageReceiver.java
â”‚   â”œâ”€â”€ ConnectionMonitor.java
â”‚   â”œâ”€â”€ HeartbeatManager.java
â”‚   â”œâ”€â”€ LatencyMonitor.java
â”‚   â”œâ”€â”€ EventSynchronizer.java
â”‚   â”œâ”€â”€ EventFilter.java
â”‚   â”œâ”€â”€ MessageBatcher.java
â”‚   â”œâ”€â”€ DisconnectionHandler.java
â”‚   â”œâ”€â”€ NetworkConfig.java
â”‚   â””â”€â”€ NetworkRole.java
â”‚
â”œâ”€â”€ network/messages/                 # ë„¤íŠ¸ì›Œí¬ ë©”ì‹œì§€
â”‚   â”œâ”€â”€ NetworkMessage.java
â”‚   â”œâ”€â”€ MessageType.java
â”‚   â”œâ”€â”€ GameEventMessage.java
â”‚   â”œâ”€â”€ AttackMessage.java
â”‚   â”œâ”€â”€ GameControlMessage.java
â”‚   â”œâ”€â”€ HeartbeatMessage.java
â”‚   â”œâ”€â”€ BatchMessage.java
â”‚   â””â”€â”€ ConnectionMessage.java
â”‚
â”œâ”€â”€ p2p/                              # P2P ëŒ€ì „ UI
â”‚   â”œâ”€â”€ P2PMenuFrame.java             # P2P ë©”ë‰´
â”‚   â”œâ”€â”€ P2PServerSetupFrame.java      # ì„œë²„ ì„¤ì •
â”‚   â”œâ”€â”€ P2PClientSetupFrame.java      # í´ë¼ì´ì–¸íŠ¸ ì„¤ì •
â”‚   â”œâ”€â”€ P2PWaitingRoom.java           # ëŒ€ê¸°ì‹¤
â”‚   â”œâ”€â”€ P2PVersusFrameBoard.java      # P2P ê²Œì„ í™”ë©´
â”‚   â”œâ”€â”€ P2PGameStart.java             # ì§„ì…ì 
â”‚   â”œâ”€â”€ P2PKeyListener.java           # ë¡œì»¬ í‚¤ ì…ë ¥ë§Œ ì²˜ë¦¬
â”‚   â”œâ”€â”€ ConnectionProgressDialog.java # ì—°ê²° ì§„í–‰ ìƒíƒœ
â”‚   â”œâ”€â”€ NetworkStatusIndicator.java   # ë„¤íŠ¸ì›Œí¬ ìƒíƒœ í‘œì‹œ
â”‚   â””â”€â”€ ConnectionHistory.java        # ìµœê·¼ ì ‘ì† IP
â”‚
â””â”€â”€ p2p/controller/                   # P2P ê²Œì„ ì»¨íŠ¸ë¡¤ëŸ¬
    â”œâ”€â”€ P2PGameController.java        # P2Pìš© ê²Œì„ ì»¨íŠ¸ë¡¤ëŸ¬
    â””â”€â”€ RemoteGameController.java     # ìƒëŒ€ë°© ê²Œì„ (ì½ê¸° ì „ìš©)
```

### 6.2 ìˆ˜ì •ë  íŒŒì¼

```
app/src/main/java/
â”œâ”€â”€ start/StartFrame.java             # "P2P ëŒ€ì „" ë²„íŠ¼ ì¶”ê°€
â”œâ”€â”€ events/                           # ê¸°ì¡´ ì´ë²¤íŠ¸ë“¤ Serializable í™•ì¸
â”‚   â”œâ”€â”€ LineClearedEvent.java
â”‚   â”œâ”€â”€ ScoreUpdateEvent.java
â”‚   â””â”€â”€ GameOverEvent.java
â””â”€â”€ blocks/Block.java                 # Serializable í™•ì¸
```

### 6.3 í…ŒìŠ¤íŠ¸ íŒŒì¼

```
app/src/test/java/
â”œâ”€â”€ network/
â”‚   â”œâ”€â”€ ConnectionManagerTest.java
â”‚   â”œâ”€â”€ MessageSerializationTest.java
â”‚   â”œâ”€â”€ HeartbeatManagerTest.java
â”‚   â””â”€â”€ LatencyMonitorTest.java
â”‚
â”œâ”€â”€ p2p/
â”‚   â”œâ”€â”€ P2PIntegrationTest.java
â”‚   â”œâ”€â”€ NetworkSimulatorTest.java
â”‚   â””â”€â”€ EventSynchronizationTest.java
â”‚
â””â”€â”€ utils/
    â””â”€â”€ NetworkSimulator.java          # í…ŒìŠ¤íŠ¸ìš© ë„¤íŠ¸ì›Œí¬ ì‹œë®¬ë ˆì´í„°
```

---

## 7. ê°œë°œ ìš°ì„ ìˆœìœ„

### ğŸ”´ Critical (í•„ìˆ˜, ë¨¼ì € êµ¬í˜„)
1. **Phase 1**: ë„¤íŠ¸ì›Œí¬ ì¸í”„ë¼ êµ¬ì¶•
   - ConnectionManager (Socket ì—°ê²°)
   - ê¸°ë³¸ UI (ì„œë²„/í´ë¼ì´ì–¸íŠ¸ ì„ íƒ)
   - ì—°ê²° ì„±ê³µ/ì‹¤íŒ¨ ì²˜ë¦¬

2. **Phase 2**: ê²Œì„ ì´ë²¤íŠ¸ ë™ê¸°í™”
   - NetworkMessage ì •ì˜
   - MessageSender/Receiver ìŠ¤ë ˆë“œ
   - P2PVersusFrameBoard êµ¬í˜„

3. **Phase 5**: ì—°ê²° ì•ˆì •ì„±
   - Heartbeat ì‹œìŠ¤í…œ
   - ì—°ê²° ëŠê¹€ ê°ì§€
   - íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬

4. **Phase 8**: ìë™í™” í…ŒìŠ¤íŠ¸
   - ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
   - í†µí•© í…ŒìŠ¤íŠ¸

### ğŸŸ¡ Important (ì¤‘ìš”, ê·¸ ë‹¤ìŒ êµ¬í˜„)
5. **Phase 3**: ê²Œì„ ì‹œì‘/ì¢…ë£Œ ì œì–´
   - ëŒ€ê¸°ì‹¤ êµ¬í˜„
   - ê²Œì„ ëª¨ë“œ ì„ íƒ

6. **Phase 4**: ê³µê²© ì‹œìŠ¤í…œ ë™ê¸°í™”
   - AttackMessage
   - ê³µê²© ì¤„ ì „ì†¡/ìˆ˜ì‹ 

7. **Phase 6**: ì§€ì—° ìµœì í™”
   - ì´ë²¤íŠ¸ í•„í„°ë§
   - ë°°ì¹˜ ì „ì†¡

### ğŸŸ¢ Nice-to-have (ì„ íƒ, ì‹œê°„ ìˆìœ¼ë©´)
8. **Phase 7**: UI/UX ê°œì„ 
   - ìµœê·¼ ì ‘ì† IP
   - ì—°ê²° ì§„í–‰ ìƒíƒœ
   - ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ì¸ë””ì¼€ì´í„°

---

## 8. í…ŒìŠ¤íŠ¸ ê³„íš

### 8.1 ê°œë°œ ë‹¨ê³„ë³„ í…ŒìŠ¤íŠ¸

#### Phase 1 í…ŒìŠ¤íŠ¸
- [ ] ì„œë²„ ì‹œì‘ â†’ í¬íŠ¸ ë¦¬ìŠ¤ë‹ í™•ì¸
- [ ] í´ë¼ì´ì–¸íŠ¸ ì—°ê²° â†’ Socket ì—°ê²° í™•ì¸
- [ ] ì–‘ë°©í–¥ í†µì‹  â†’ ë©”ì‹œì§€ ì†¡ìˆ˜ì‹  í™•ì¸
- [ ] ì˜ëª»ëœ IP â†’ ì—ëŸ¬ ì²˜ë¦¬ í™•ì¸
- [ ] í¬íŠ¸ ì‚¬ìš© ì¤‘ â†’ ì—ëŸ¬ ì²˜ë¦¬ í™•ì¸

#### Phase 2 í…ŒìŠ¤íŠ¸
- [ ] ë¸”ë¡ ì´ë™ â†’ ìƒëŒ€ë°© í™”ë©´ ë™ê¸°í™”
- [ ] ë¸”ë¡ íšŒì „ â†’ ìƒëŒ€ë°© í™”ë©´ ë™ê¸°í™”
- [ ] ë¸”ë¡ ì°©ì§€ â†’ ìƒëŒ€ë°© í™”ë©´ ë™ê¸°í™”
- [ ] ì¤„ ì‚­ì œ â†’ ìƒëŒ€ë°© í™”ë©´ ë™ê¸°í™”
- [ ] ì ìˆ˜ ì¦ê°€ â†’ ìƒëŒ€ë°© í™”ë©´ ë™ê¸°í™”

#### Phase 5 í…ŒìŠ¤íŠ¸
- [ ] ì •ìƒ ì—°ê²° â†’ Heartbeat ì •ìƒ
- [ ] ë„¤íŠ¸ì›Œí¬ ëŠê¹€ â†’ 5ì´ˆ ë‚´ ê°ì§€
- [ ] ì§€ì—° ë°œìƒ â†’ "ë™ ê±¸ë¦¼" í‘œì‹œ
- [ ] ì¬ì—°ê²° â†’ ëŒ€ê¸°ì‹¤ë¡œ ë³µê·€

### 8.2 ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

#### ì§€ì—° ì‹œê°„ ì¸¡ì •
```
ëª©í‘œ: í‚¤ ì…ë ¥ â†’ ìƒëŒ€ë°© í™”ë©´ í‘œì‹œ < 200ms

ì¸¡ì • í•­ëª©:
- ì§ë ¬í™” ì‹œê°„
- ë„¤íŠ¸ì›Œí¬ ì „ì†¡ ì‹œê°„
- ì—­ì§ë ¬í™” ì‹œê°„
- ì´ë²¤íŠ¸ ì²˜ë¦¬ ì‹œê°„
- í™”ë©´ ë Œë”ë§ ì‹œê°„
```

#### ë¶€í•˜ í…ŒìŠ¤íŠ¸
```
ì‹œë‚˜ë¦¬ì˜¤:
1. ë¹ ë¥´ê²Œ ë¸”ë¡ ì´ë™ (ì´ˆë‹¹ 10íšŒ)
2. ë™ì‹œì— ì—¬ëŸ¬ ì´ë²¤íŠ¸ ë°œìƒ
3. ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ ì œí•œ

í™•ì¸ ì‚¬í•­:
- ë©”ì‹œì§€ í ì˜¤ë²„í”Œë¡œìš°
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
- CPU ì‚¬ìš©ëŸ‰
```

### 8.3 ì—£ì§€ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸

- [ ] ì„œë²„ ë¨¼ì € ì¢…ë£Œ â†’ í´ë¼ì´ì–¸íŠ¸ ì²˜ë¦¬
- [ ] í´ë¼ì´ì–¸íŠ¸ ë¨¼ì € ì¢…ë£Œ â†’ ì„œë²„ ì²˜ë¦¬
- [ ] ê²Œì„ ì¤‘ ë„¤íŠ¸ì›Œí¬ ëŠê¹€
- [ ] ê²Œì„ ì¤‘ ë†’ì€ ì§€ì—° (500ms+)
- [ ] ë™ì‹œì— ì–‘ìª½ì—ì„œ ì´ë²¤íŠ¸ ë°œìƒ
- [ ] IP ë³€ê²½ (Wi-Fi ì¬ì—°ê²°)

### 8.4 íšŒê·€ í…ŒìŠ¤íŠ¸

- [ ] ë¡œì»¬ ëŒ€ì „ ëª¨ë“œ ì •ìƒ ì‘ë™
- [ ] ì‹±ê¸€ í”Œë ˆì´ ëª¨ë“œ ì •ìƒ ì‘ë™
- [ ] ê¸°ì¡´ ê¸°ëŠ¥ ëª¨ë‘ ì •ìƒ

---

## 9. ì˜ˆìƒ ì´ìŠˆ ë° ëŒ€ì‘ ë°©ì•ˆ

### 9.1 ê¸°ìˆ ì  ì´ìŠˆ

#### ì´ìŠˆ 1: ì§ë ¬í™” ë¬¸ì œ
- **ë¬¸ì œ**: Block í´ë˜ìŠ¤ê°€ Serializable ì•„ë‹ ìˆ˜ ìˆìŒ
- **í•´ê²°**: Block ë° ëª¨ë“  ì´ë²¤íŠ¸ í´ë˜ìŠ¤ì— `implements Serializable` ì¶”ê°€
- **ëŒ€ì•ˆ**: JSON ì§ë ¬í™” (Gson ë¼ì´ë¸ŒëŸ¬ë¦¬)

#### ì´ìŠˆ 2: ë™ê¸°í™” ë¶ˆì¼ì¹˜
- **ë¬¸ì œ**: ì–‘ìª½ ê²Œì„ ìƒíƒœê°€ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ
- **í•´ê²°**: 
  - ì£¼ê¸°ì ìœ¼ë¡œ ì „ì²´ ê²Œì„ ìƒíƒœ ë™ê¸°í™”
  - ì²´í¬ì„¬ìœ¼ë¡œ ìƒíƒœ ì¼ì¹˜ í™•ì¸
  - ë¶ˆì¼ì¹˜ ì‹œ ì¬ë™ê¸°í™”

#### ì´ìŠˆ 3: ë„¤íŠ¸ì›Œí¬ ì§€ì—°
- **ë¬¸ì œ**: 200ms ëª©í‘œ ë‹¬ì„± ì–´ë ¤ì›€
- **í•´ê²°**:
  - ì´ë²¤íŠ¸ í•„í„°ë§ (ë¶ˆí•„ìš”í•œ ì´ë²¤íŠ¸ ì „ì†¡ X)
  - ë°°ì¹˜ ì „ì†¡
  - ì••ì¶• (ì„ íƒì )
  - ì…ë ¥ ì˜ˆì¸¡ (ì„ íƒì )

#### ì´ìŠˆ 4: ë°©í™”ë²½/NAT ë¬¸ì œ
- **ë¬¸ì œ**: ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ì—ì„œ ì—°ê²° ë¶ˆê°€
- **í•´ê²°**:
  - UPnP ìë™ í¬íŠ¸ í¬ì›Œë”©
  - ìˆ˜ë™ í¬íŠ¸ í¬ì›Œë”© ê°€ì´ë“œ ì œê³µ
  - í˜„ì¬ëŠ” ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ë§Œ ì§€ì›

### 9.2 ê²Œì„ ë¡œì§ ì´ìŠˆ

#### ì´ìŠˆ 5: ê³µê²© ì¤„ ì¤‘ë³µ ì ìš©
- **ë¬¸ì œ**: ë„¤íŠ¸ì›Œí¬ ì¬ì „ì†¡ìœ¼ë¡œ ê³µê²© ì¤„ ì¤‘ë³µ
- **í•´ê²°**: ë©”ì‹œì§€ IDë¡œ ì¤‘ë³µ ì œê±°

#### ì´ìŠˆ 6: ê²Œì„ ì˜¤ë²„ íƒ€ì´ë°
- **ë¬¸ì œ**: ì–‘ìª½ ê²Œì„ ì˜¤ë²„ ì‹œì  ë‹¤ë¦„
- **í•´ê²°**: ê²Œì„ ì˜¤ë²„ ì´ë²¤íŠ¸ ì¦‰ì‹œ ì „ì†¡, ìŠ¹ì íŒì •ì€ ì„œë²„ì—ì„œ

---

## 10. ë§ˆì¼ìŠ¤í†¤

### Milestone 1: ê¸°ë³¸ ì—°ê²° (1ì£¼)
- [ ] ë„¤íŠ¸ì›Œí¬ íŒ¨í‚¤ì§€ êµ¬ì¡° ìƒì„±
- [ ] ConnectionManager êµ¬í˜„
- [ ] P2P ë©”ë‰´ UI êµ¬í˜„
- [ ] ì„œë²„/í´ë¼ì´ì–¸íŠ¸ ì—°ê²° ì„±ê³µ

### Milestone 2: ì´ë²¤íŠ¸ ë™ê¸°í™” (2ì£¼)
- [ ] NetworkMessage ì •ì˜
- [ ] MessageSender/Receiver êµ¬í˜„
- [ ] P2PVersusFrameBoard êµ¬í˜„
- [ ] ê¸°ë³¸ ê²Œì„ ì´ë²¤íŠ¸ ë™ê¸°í™”

### Milestone 3: ì•ˆì •ì„± í™•ë³´ (1ì£¼)
- [ ] Heartbeat êµ¬í˜„
- [ ] ì—°ê²° ëŠê¹€ ì²˜ë¦¬
- [ ] ì§€ì—° ê°ì§€ ë° í‘œì‹œ
- [ ] ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì‘ì„±

### Milestone 4: ê²Œì„ ì œì–´ (1ì£¼)
- [ ] ëŒ€ê¸°ì‹¤ êµ¬í˜„
- [ ] ê²Œì„ ì‹œì‘/ì¢…ë£Œ ì œì–´
- [ ] ëª¨ë“œ ì„ íƒ ë™ê¸°í™”

### Milestone 5: ê³µê²© ì‹œìŠ¤í…œ (1ì£¼)
- [ ] AttackMessage êµ¬í˜„
- [ ] ê³µê²© ì¤„ ë™ê¸°í™”
- [ ] ì „ì²´ ê²Œì„ í”Œë ˆì´ í…ŒìŠ¤íŠ¸

### Milestone 6: ìµœì í™” ë° ì™„ì„± (1ì£¼)
- [ ] ì„±ëŠ¥ ìµœì í™”
- [ ] UI/UX ê°œì„ 
- [ ] í†µí•© í…ŒìŠ¤íŠ¸
- [ ] ë¬¸ì„œ ì‘ì„±

**ì´ ì˜ˆìƒ ê¸°ê°„: 7ì£¼**

---

## 11. ì°¸ê³  ìë£Œ

### 11.1 Java Socket í”„ë¡œê·¸ë˜ë°
- Java Socket API ë¬¸ì„œ
- ObjectInputStream/ObjectOutputStream ì‚¬ìš©ë²•
- ë©€í‹°ìŠ¤ë ˆë”© ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### 11.2 ë„¤íŠ¸ì›Œí¬ ê²Œì„ ê°œë°œ
- Client-Server vs P2P ì•„í‚¤í…ì²˜
- ê²Œì„ ìƒíƒœ ë™ê¸°í™” ê¸°ë²•
- ë„¤íŠ¸ì›Œí¬ ì§€ì—° ë³´ìƒ (Lag Compensation)
- Dead Reckoning (ì…ë ¥ ì˜ˆì¸¡)

### 11.3 í…ŒìŠ¤íŠ¸
- JUnit 5 ë¬¸ì„œ
- Mockito (ë„¤íŠ¸ì›Œí¬ ëª¨í‚¹)
- ë„¤íŠ¸ì›Œí¬ ì‹œë®¬ë ˆì´ì…˜ ë„êµ¬

---

## 12. ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì‹œì‘ ì „ í™•ì¸
- [ ] í˜„ì¬ ë¡œì»¬ ëŒ€ì „ ëª¨ë“œ ì •ìƒ ì‘ë™ í™•ì¸
- [ ] Block í´ë˜ìŠ¤ Serializable ì—¬ë¶€ í™•ì¸
- [ ] ëª¨ë“  GameEvent Serializable ì—¬ë¶€ í™•ì¸
- [ ] ê°œë°œ í™˜ê²½ Java 17 í™•ì¸

### Phaseë³„ ì™„ë£Œ ì²´í¬
- [ ] Phase 1: ê¸°ë³¸ ì—°ê²° ì™„ë£Œ
- [ ] Phase 2: ì´ë²¤íŠ¸ ë™ê¸°í™” ì™„ë£Œ
- [ ] Phase 3: ê²Œì„ ì œì–´ ì™„ë£Œ
- [ ] Phase 4: ê³µê²© ì‹œìŠ¤í…œ ì™„ë£Œ
- [ ] Phase 5: ì•ˆì •ì„± í™•ë³´ ì™„ë£Œ
- [ ] Phase 6: ìµœì í™” ì™„ë£Œ
- [ ] Phase 7: UI/UX ê°œì„  ì™„ë£Œ
- [ ] Phase 8: í…ŒìŠ¤íŠ¸ ì™„ë£Œ

### ìµœì¢… ê²€ìˆ˜
- [ ] 200ms ì§€ì—° ëª©í‘œ ë‹¬ì„±
- [ ] ë„¤íŠ¸ì›Œí¬ ëŠê¹€ ì •ìƒ ì²˜ë¦¬
- [ ] ëª¨ë“  ê²Œì„ ëª¨ë“œ ì •ìƒ ì‘ë™
- [ ] ìë™í™” í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ë¬¸ì„œ ì‘ì„± ì™„ë£Œ

---

## 13. ë‹¤ìŒ ë‹¨ê³„

1. **íŒ€ ë¯¸íŒ…**: ê³„íš ê²€í†  ë° ì—­í•  ë¶„ë‹´
2. **í™˜ê²½ ì„¤ì •**: ê°œë°œ í™˜ê²½ êµ¬ì¶•, ì˜ì¡´ì„± ì¶”ê°€
3. **Phase 1 ì‹œì‘**: ConnectionManager êµ¬í˜„ë¶€í„° ì‹œì‘
4. **ì¼ì¼ ìŠ¤íƒ ë“œì—…**: ì§„í–‰ ìƒí™© ê³µìœ  ë° ì´ìŠˆ ë…¼ì˜
5. **ì£¼ê°„ ë¦¬ë·°**: ë§ˆì¼ìŠ¤í†¤ ë‹¬ì„± ì—¬ë¶€ ì ê²€

**Good Luck! ğŸš€**
